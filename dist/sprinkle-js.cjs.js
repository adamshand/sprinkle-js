"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const E=e=>typeof e=="string"?document.querySelector(e):e,j=(e,t,n=[])=>{Object.entries(t).forEach(([i,c])=>{if(typeof c=="object"){j(e,c,[...n,i]);return}let o=e;if(n.forEach(a=>{o=o[a]}),n[n.length-1]==="style"&&i.startsWith("--")){o.setProperty(i,c);return}if(i==="className"&&e instanceof SVGElement){o.setAttribute("class",c.toString());return}if(n.length===0&&i.startsWith("data-")){e.setAttribute(i,c);return}o[i]=c})},R=(e,t)=>[...Array(e).keys()].map(()=>Array(t).fill(0)),I=(e=[],t=[],n=(s,i)=>s===i)=>{var a,u,y,b,r,f;const s=R(e.length+1,t.length+1);for(let l=0;l<e.length+1;l+=1)s[l][0]=l;for(let l=0;l<t.length+1;l+=1)s[0][l]=l;for(let l=0;l<e.length;l+=1)for(let m=0;m<t.length;m+=1)if(n(e[l],t[m]))s[l+1][m+1]=s[l][m];else{const T=Math.min(s[l+1][m],s[l][m+1])+1;s[l+1][m+1]=T}const i=[];let c=e.length,o=t.length;for(;c>0&&o>0;)n(e[c-1],t[o-1])?(i.unshift({type:"=",value:e[c-1],skip:!1}),o-=1,c-=1):s[c-1][o]<s[c][o-1]?(i.unshift({type:"-",value:e[c-1],skip:!1}),c-=1):(i.unshift({type:"+",value:t[o-1],skip:!1}),o-=1);return c>0?i.unshift(...((y=(u=(a=e==null?void 0:e.slice)==null?void 0:a.call(e,0,c))==null?void 0:u.map)==null?void 0:y.call(u,l=>({type:"-",value:l,skip:!1})))||[]):o>0&&i.unshift(...((f=(r=(b=t==null?void 0:t.slice)==null?void 0:b.call(t,0,o))==null?void 0:r.map)==null?void 0:f.call(r,l=>({type:"+",value:l,skip:!1})))||[]),i},S=(e,t,n=0)=>e.find((s,i,...c)=>i>n&&t(s,i,...c)),O=e=>Object.prototype.toString.call(e).slice(8,-1),L=e=>{const t=document.createElement("template");return Object.assign(t,{innerHTML:e}),t.content},M=(e,t)=>e.getAttribute(t),h=e=>e instanceof Element?M(e,"key"):e.textContent;let p=[];const g=Symbol("is-reactive"),k=Symbol("memo");let v=null;const C=e=>{[...e].forEach(t=>{if(!t.toRun)return;const n=t.execute();n&&(t.cleanup=n)})},V=e=>{v=new Set;try{e()}finally{const t=new Set(v);v=null,C(t)}},P=(e,t,n)=>{let s=n.get(e);s||(s=new Set,n.set(e,s)),s.add(t),t.dependencies.add(s)},_=(e,t)=>{const n=e.get(t);if(!!n){if(v!==null){n.forEach(s=>v.add(s));return}C(n)}},w=(e,t)=>{if(e[g])return e;if(typeof e!="object")throw new Error("It's not possible to create a variable from a primitive value...you can use createRef");Object.keys(e||{}).forEach(c=>{const o=c;!!e[o]&&typeof e[o]=="object"&&(O(e[o])==="Object"||Array.isArray(e[o]))&&(e[o]=w(e[o],t==null?void 0:t[o]))});const s=new Map;return new Proxy(e,{get:(...c)=>{if(c[1]===g)return!0;const o=p[p.length-1];return o&&P(c[1],o,s),Reflect.get(...c)},set:(c,o,a)=>{var l;if(c[k]===!1&&o!==k)return!0;const u=o,y=(l=t==null?void 0:t[u])!=null?l:Object.is;let b=a;!!a&&typeof a=="object"&&(O(a)==="Object"||Array.isArray(a))&&!a[g]&&(b=w(a,y));const r=y(c[u],a),f=Reflect.set(c,o,b);return r||_(s,o),f}})},N=(e,t,n=":root")=>{const s=w(e,t);let i=E(n);return i||(console.warn("Impossible to find the right html element, attaching the variables to the root."),i=document.querySelector(":root")),d(()=>{Object.keys(s).forEach(o=>{var a;i.style.setProperty(`--${o}`,(a=s[o])==null?void 0:a.toString())})}),s},H=(e,t)=>{const n={value:e(),[k]:!1},s=w(n,t?{value:t}:void 0);return d(()=>{s[k]=!0,s.value=e(),s[k]=!1}),s},J=(e,t,n,s=window.localStorage)=>{if(typeof t!="object")throw new Error("It's not possible to create a variable from a primitive value...you can use createRef");let i=null;try{const o=s.getItem(e);o?i=JSON.parse(o):s.setItem(e,JSON.stringify(t))}catch{throw new Error("The specified key is associated with a non Object-like element")}const c=w(i!=null?i:t,n);return d(()=>{s.setItem(e,JSON.stringify(c))}),window.addEventListener("storage",o=>{if(o.storageArea===s&&o.key===e)try{if(o.newValue){const a=JSON.parse(o.newValue);Object.keys(a).forEach(y=>{c[y]=a[y]})}}catch{console.warn("The storage was modified but the resulting object is not parsable...the variable was not updated.")}}),c},U=(e,t)=>w({value:e},t?{value:t}:void 0),A=e=>{e.owned.forEach(t=>{t.toRun=!1,A(t)}),e.dependencies.forEach(t=>{t.delete(e)}),e.dependencies.clear()},d=e=>{const t=()=>{var c,o,a;if(!n.toRun)return;(a=(o=(c=n==null?void 0:n.owner)==null?void 0:c.owned)==null?void 0:o.push)==null||a.call(o,n),n.cleanup&&typeof n.cleanup=="function"&&n.cleanup(),A(n),p.push(n);let i;try{i=e()}finally{p.pop()}return i},n={execute:t,dependencies:new Set,owned:[],owner:p[p.length-1],toRun:!0},s=t();s&&(n.cleanup=s)},W=e=>{const t=p;p=[];const n=e();return p=t,n},B=(e,t)=>{const n=E(e);return d(()=>{n&&(n.textContent=t(n))}),n},D=(e,t)=>{const n=E(e);return d(()=>{n&&(n.innerHTML=t(n))}),n},F=(e,t,n)=>{const s=E(e);return d(()=>{s&&(n(s)?s.classList.add(t):s.classList.remove(t))}),s},G=(e,t)=>{const n=E(e);return d(()=>{if(n){const s=t(n);Object.keys(s||{}).forEach(c=>{s[c]?n.classList.add(c):n.classList.remove(c)})}}),n},Q=(e,t)=>{const n=E(e);return d(()=>{n&&(n.value=t(n))}),n},x=(e,t)=>{const n=E(e);return d(()=>j(n,t(n))),n},Y=(e,t)=>{const n=E(e);if(!!n)return x(n,()=>({style:t(n)})),n},$=(e,t,n)=>{const s=E(e);return d(()=>{if(s===null)return;const i=t(s),c=L(i).childNodes,o=new Map,a=(r,f=!0)=>{const l=h(r);l!=null&&o.set(l,{element:r,isNew:f})};if(s.children.length===0){const r=Array.from(c);s.append(...r),r.forEach(f=>a(f)),typeof n=="function"&&d(()=>{n(s,o)});return}const u=I(Array.from(s.childNodes),Array.from(c),(r,f)=>h(r)!=null&&h(f)!=null?h(r)===h(f):r===f);let y=u.find(r=>r.type==="="),b=0;u.forEach(r=>{if(r.type==="+"){const f=S(u,l=>l.type==="-"&&h(l.value)===h(r.value),b);if(f&&(r.value=f.value,f.skip=!0),!y){s.append(r.value),a(r.value),b+=1;return}y.value.before(r.value),a(r.value)}else if(r.type==="-"){if(r.skip){b+=1;return}s.removeChild(r.value);const f=S(u,l=>l.type==="+"&&h(l.value)===h(r.value),b);f&&(f.value=r.value)}else y=S(u,f=>f.type==="=",b),a(r.value,!1);b+=1}),typeof n=="function"&&d(()=>{n(s,o)})}),s};exports.batch=V;exports.bindChildrens=$;exports.bindClass=F;exports.bindClasses=G;exports.bindDom=x;exports.bindInnerHTML=D;exports.bindInputValue=Q;exports.bindStyle=Y;exports.bindTextContent=B;exports.createComputed=H;exports.createCssVariable=N;exports.createEffect=d;exports.createRef=U;exports.createStored=J;exports.createVariable=w;exports.untrack=W;
