"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const w=e=>typeof e=="string"?document.querySelector(e):e,C=(e,t,n=[])=>{const s=Object.entries(t);for(let[f,i]of s){if(typeof i=="object"){C(e,i,[...n,f]);return}let o=e;for(const c of n)o=o[c];n[n.length-1]==="style"&&o.setProperty(f,i),o[f]=i}},M=(e,t)=>[...Array(e).keys()].map(()=>Array(t).fill(0)),I=(e=[],t=[],n=(s,f)=>s===f)=>{var c,a,d,p,r,u;const s=M(e.length+1,t.length+1);for(let l=0;l<e.length+1;l++)s[l][0]=l;for(let l=0;l<t.length+1;l++)s[0][l]=l;for(let l=0;l<e.length;l++)for(let h=0;h<t.length;h++)if(n(e[l],t[h]))s[l+1][h+1]=s[l][h];else{const T=Math.min(s[l+1][h],s[l][h+1])+1;s[l+1][h+1]=T}const f=[];let i=e.length,o=t.length;for(;i>0&&o>0;)n(e[i-1],t[o-1])?(f.unshift({type:"=",value:e[i-1],skip:!1}),o--,i--):s[i-1][o]<s[i][o-1]?(f.unshift({type:"-",value:e[i-1],skip:!1}),i--):(f.unshift({type:"+",value:t[o-1],skip:!1}),o--);return i>0?f.unshift(...((d=(a=(c=e==null?void 0:e.slice)==null?void 0:c.call(e,0,i))==null?void 0:a.map)==null?void 0:d.call(a,l=>({type:"-",value:l,skip:!1})))||[]):o>0&&f.unshift(...((u=(r=(p=t==null?void 0:t.slice)==null?void 0:p.call(t,0,o))==null?void 0:r.map)==null?void 0:u.call(r,l=>({type:"+",value:l,skip:!1})))||[]),f},E=(e,t,n=0)=>e.find((s,f,...i)=>f>n&&t(s,f,...i)),O=e=>Object.prototype.toString.call(e).slice(8,-1),L=e=>{const t=document.createElement("template");return Object.assign(t,{innerHTML:e}),t.content},V=(e,t)=>e.getAttribute(t),m=e=>e instanceof Element?V(e,"key"):e.textContent;let y=[];const k=Symbol("is-reactive");let g=null;const P=e=>{g=new Set;try{e()}finally{const t=new Set(g);g=null,x(t)}},S=(e,t,n)=>{let s=n.get(e);s||(s=new Set,n.set(e,s)),s.add(t),t.dependencies.add(s)},x=e=>{[...e].forEach(t=>{if(!t.toRun)return;const n=t.execute();n&&(t.cleanup=n)})},j=(e,t)=>{const n=e.get(t);if(!!n){if(g!==null){n.forEach(s=>g.add(s));return}x(n)}},v=(e,t)=>{if(e[k])return e;if(typeof e!="object")throw new Error("It's not possible to create a variable from a primitive value...you can use createRef");const n=Object.keys(e||{});for(let i of n){const o=i;!!e[o]&&typeof e[o]=="object"&&(O(e[o])==="Object"||Array.isArray(e[o]))&&(e[o]=v(e[o],t==null?void 0:t[o]))}const s=new Map;return new Proxy(e,{get:(...i)=>{if(i[1]===k)return!0;const o=y[y.length-1];return o&&S(i[1],o,s),Reflect.get(...i)},set:(i,o,c)=>{var l;const a=o,d=(l=t==null?void 0:t[a])!=null?l:Object.is;let p=c;!!c&&typeof c=="object"&&(O(c)==="Object"||Array.isArray(c))&&!c[k]&&(p=v(c,d));const r=d(i[a],c),u=Reflect.set(i,o,p);return r||j(s,o),u}})},N=(e,t,n=":root")=>{const s=v(e,t);let f=w(n);return f||(console.warn("Impossible to find the right html element, attaching the variables to the root."),f=document.querySelector(":root")),b(()=>{Object.keys(s).forEach(o=>{var c;f.style.setProperty(`--${o}`,(c=s[o])==null?void 0:c.toString())})}),s},_=(e,t)=>{const n={value:e()};let s=!1;const f=new Map,i=new Proxy(n,{get:(...o)=>{const c=y[y.length-1];return c&&S(o[1],c,f),Reflect.get(...o)},set:(o,c,a)=>{if(!s)return!0;const d=c,r=(t!=null?t:Object.is)(o[d],a),u=Reflect.set(o,c,a);return r||j(f,c),u}});return b(()=>{s=!0,i.value=e(),s=!1}),i},H=(e,t,n,s=window.localStorage)=>{if(typeof t!="object")throw new Error("It's not possible to create a variable from a primitive value...you can use createRef");const f=new Map;let i=null;try{const c=s.getItem(e);c?i=JSON.parse(c):s.setItem(e,JSON.stringify(t))}catch{throw new Error("The specified key is associated with a non Object-like element")}const o=new Proxy(i!=null?i:t,{get:(...c)=>{const a=y[y.length-1];return a&&S(c[1],a,f),Reflect.get(...c)},set:(c,a,d)=>{var h;const p=a,u=((h=n==null?void 0:n[p])!=null?h:Object.is)(c[p],d),l=Reflect.set(c,a,d);return s.setItem(e,JSON.stringify(c)),u||j(f,a),l}});return window.addEventListener("storage",c=>{if(c.storageArea===s&&c.key===e)try{if(c.newValue){const a=JSON.parse(c.newValue);for(let d in a)o[d]=a[d]}}catch{console.warn("The storage was modified but the resulting object is not parsable...the variable was not updated.")}}),o},J=(e,t)=>v({value:e},t?{value:t}:void 0),R=e=>{e.owned.forEach(t=>{t.toRun=!1,R(t)});for(const t of e.dependencies)t.delete(e);e.dependencies.clear()},b=e=>{const t=()=>{var i,o,c;if(!n.toRun)return;(c=(o=(i=n==null?void 0:n.owner)==null?void 0:i.owned)==null?void 0:o.push)==null||c.call(o,n),n.cleanup&&typeof n.cleanup=="function"&&n.cleanup(),R(n),y.push(n);let f;try{f=e()}finally{y.pop()}return f},n={execute:t,dependencies:new Set,owned:[],owner:y[y.length-1],toRun:!0},s=t();s&&(n.cleanup=s)},U=e=>{const t=y;y=[];const n=e();return y=t,n},F=(e,t)=>{const n=w(e);return b(()=>{n&&(n.textContent=t(n))}),n},B=(e,t)=>{const n=w(e);return b(()=>{n&&(n.innerHTML=t(n))}),n},D=(e,t,n)=>{const s=w(e);return b(()=>{s&&(n(s)?s.classList.add(t):s.classList.remove(t))}),s},K=(e,t)=>{const n=w(e);return b(()=>{if(n){const s=t(n),f=Object.keys(s||{});for(let i of f)s[i]?n.classList.add(i):n.classList.remove(i)}}),n},Q=(e,t)=>{const n=w(e);return b(()=>{n&&(n.value=t(n))}),n},A=(e,t)=>{const n=w(e);return b(()=>C(n,t(n))),n},W=(e,t)=>{const n=w(e);if(!!n)return A(n,()=>({style:t(n)})),n},Y=(e,t,n)=>{const s=w(e);return b(()=>{if(s===null)return;const f=t(s),i=L(f).childNodes,o=new Map,c=(r,u=!0)=>{const l=m(r);(l!==null||l!=null)&&o.set(l,{element:r,isNew:u})};if(s.children.length===0){const r=Array.from(i);s.append(...r),r.forEach(u=>c(u)),typeof n=="function"&&b(()=>{n(s,o)});return}const a=I(Array.from(s.childNodes),Array.from(i),(r,u)=>m(r)!=null&&m(u)!=null?m(r)===m(u):r===u);let d=a.find(r=>r.type==="="),p=0;for(let r of a){if(r.type==="+"){const u=E(a,l=>l.type==="-"&&m(l.value)===m(r.value),p);if(u&&(r.value=u.value,u.skip=!0),!d){s.append(r.value),c(r.value),p++;continue}d.value.before(r.value),c(r.value)}else if(r.type==="-"){if(r.skip){p++;continue}s.removeChild(r.value);const u=E(a,l=>l.type==="+"&&m(l.value)===m(r.value),p);u&&(u.value=r.value)}else d=E(a,u=>u.type==="=",p),c(r.value,!1);p++}typeof n=="function"&&b(()=>{n(s,o)})}),s};exports.batch=P;exports.bindChildrens=Y;exports.bindClass=D;exports.bindClasses=K;exports.bindDom=A;exports.bindInnerHTML=B;exports.bindInputValue=Q;exports.bindStyle=W;exports.bindTextContent=F;exports.createComputed=_;exports.createCssVariable=N;exports.createEffect=b;exports.createRef=J;exports.createStored=H;exports.createVariable=v;exports.untrack=U;
