"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const E=t=>typeof t=="string"?document.querySelector(t):t,C=(t,e,n=[])=>{Object.entries(e).forEach(([r,c])=>{if(typeof c=="object"){C(t,c,[...n,r]);return}let o=t;if(n.forEach(i=>{o=o[i]}),n[n.length-1]==="style"&&r.startsWith("--")){o.setProperty(r,c);return}if(r==="className"&&t instanceof SVGElement){o.setAttribute("class",c.toString());return}if(n.length===0&&r.startsWith("data-")){t.setAttribute(r,c);return}o[r]=c})},L=(t,e)=>[...Array(t).keys()].map(()=>Array(e).fill(0)),M=(t=[],e=[],n=(s,r)=>s===r)=>{var i,a,y,d,u,f;const s=L(t.length+1,e.length+1);for(let l=0;l<t.length+1;l+=1)s[l][0]=l;for(let l=0;l<e.length+1;l+=1)s[0][l]=l;for(let l=0;l<t.length;l+=1)for(let p=0;p<e.length;p+=1)if(n(t[l],e[p]))s[l+1][p+1]=s[l][p];else{const T=Math.min(s[l+1][p],s[l][p+1])+1;s[l+1][p+1]=T}const r=[];let c=t.length,o=e.length;for(;c>0&&o>0;)n(t[c-1],e[o-1])?(r.unshift({type:"=",value:t[c-1],skip:!1}),o-=1,c-=1):s[c-1][o]<s[c][o-1]?(r.unshift({type:"-",value:t[c-1],skip:!1}),c-=1):(r.unshift({type:"+",value:e[o-1],skip:!1}),o-=1);return c>0?r.unshift(...((y=(a=(i=t==null?void 0:t.slice)==null?void 0:i.call(t,0,c))==null?void 0:a.map)==null?void 0:y.call(a,l=>({type:"-",value:l,skip:!1})))||[]):o>0&&r.unshift(...((f=(u=(d=e==null?void 0:e.slice)==null?void 0:d.call(e,0,o))==null?void 0:u.map)==null?void 0:f.call(u,l=>({type:"+",value:l,skip:!1})))||[]),r},m=(t,e,n=0)=>t.find((s,r,...c)=>r>n&&e(s,r,...c)),O=t=>Object.prototype.toString.call(t).slice(8,-1),I=t=>{const e=document.createElement("template");return Object.assign(e,{innerHTML:t}),e.content},V=(t,e)=>t.getAttribute(e),w=t=>t instanceof Element?V(t,"key"):t.textContent;let b=[];const S=Symbol("is-reactive");let g=null;const x=t=>{[...t].forEach(e=>{if(!e.toRun)return;const n=e.execute();n&&(e.cleanup=n)})},P=t=>{g=new Set;try{t()}finally{const e=new Set(g);g=null,x(e)}},v=(t,e,n)=>{let s=n.get(t);s||(s=new Set,n.set(t,s)),s.add(e),e.dependencies.add(s)},j=(t,e)=>{const n=t.get(e);if(!!n){if(g!==null){n.forEach(s=>g.add(s));return}x(n)}},k=(t,e)=>{if(t[S])return t;if(typeof t!="object")throw new Error("It's not possible to create a variable from a primitive value...you can use createRef");Object.keys(t||{}).forEach(c=>{const o=c;!!t[o]&&typeof t[o]=="object"&&(O(t[o])==="Object"||Array.isArray(t[o]))&&(t[o]=k(t[o],e==null?void 0:e[o]))});const s=new Map;return new Proxy(t,{get:(...c)=>{if(c[1]===S)return!0;const o=b[b.length-1];return o&&v(c[1],o,s),Reflect.get(...c)},set:(c,o,i)=>{var l;const a=o,y=(l=e==null?void 0:e[a])!=null?l:Object.is;let d=i;!!i&&typeof i=="object"&&(O(i)==="Object"||Array.isArray(i))&&!i[S]&&(d=k(i,y));const u=y(c[a],i),f=Reflect.set(c,o,d);return u||j(s,o),f}})},N=(t,e,n=":root")=>{const s=k(t,e);let r=E(n);return r||(console.warn("Impossible to find the right html element, attaching the variables to the root."),r=document.querySelector(":root")),h(()=>{Object.keys(s).forEach(o=>{var i;r.style.setProperty(`--${o}`,(i=s[o])==null?void 0:i.toString())})}),s},_=(t,e)=>{const n={value:t()};let s=!1;const r=new Map,c=new Proxy(n,{get:(...o)=>{const i=b[b.length-1];return i&&v(o[1],i,r),Reflect.get(...o)},set:(o,i,a)=>{if(!s)return!0;const y=i,u=(e!=null?e:Object.is)(o[y],a),f=Reflect.set(o,i,a);return u||j(r,i),f}});return h(()=>{s=!0,c.value=t(),s=!1}),c},H=(t,e,n,s=window.localStorage)=>{if(typeof e!="object")throw new Error("It's not possible to create a variable from a primitive value...you can use createRef");const r=new Map;let c=null;try{const i=s.getItem(t);i?c=JSON.parse(i):s.setItem(t,JSON.stringify(e))}catch{throw new Error("The specified key is associated with a non Object-like element")}const o=new Proxy(c!=null?c:e,{get:(...i)=>{const a=b[b.length-1];return a&&v(i[1],a,r),Reflect.get(...i)},set:(i,a,y)=>{var p;const d=a,f=((p=n==null?void 0:n[d])!=null?p:Object.is)(i[d],y),l=Reflect.set(i,a,y);return s.setItem(t,JSON.stringify(i)),f||j(r,a),l}});return window.addEventListener("storage",i=>{if(i.storageArea===s&&i.key===t)try{if(i.newValue){const a=JSON.parse(i.newValue);Object.keys(a).forEach(d=>{o[d]=a[d]})}}catch{console.warn("The storage was modified but the resulting object is not parsable...the variable was not updated.")}}),o},J=(t,e)=>k({value:t},e?{value:e}:void 0),R=t=>{t.owned.forEach(e=>{e.toRun=!1,R(e)}),t.dependencies.forEach(e=>{e.delete(t)}),t.dependencies.clear()},h=t=>{const e=()=>{var c,o,i;if(!n.toRun)return;(i=(o=(c=n==null?void 0:n.owner)==null?void 0:c.owned)==null?void 0:o.push)==null||i.call(o,n),n.cleanup&&typeof n.cleanup=="function"&&n.cleanup(),R(n),b.push(n);let r;try{r=t()}finally{b.pop()}return r},n={execute:e,dependencies:new Set,owned:[],owner:b[b.length-1],toRun:!0},s=e();s&&(n.cleanup=s)},U=t=>{const e=b;b=[];const n=t();return b=e,n},W=(t,e)=>{const n=E(t);return h(()=>{n&&(n.textContent=e(n))}),n},F=(t,e)=>{const n=E(t);return h(()=>{n&&(n.innerHTML=e(n))}),n},B=(t,e,n)=>{const s=E(t);return h(()=>{s&&(n(s)?s.classList.add(e):s.classList.remove(e))}),s},D=(t,e)=>{const n=E(t);return h(()=>{if(n){const s=e(n);Object.keys(s||{}).forEach(c=>{s[c]?n.classList.add(c):n.classList.remove(c)})}}),n},G=(t,e)=>{const n=E(t);return h(()=>{n&&(n.value=e(n))}),n},A=(t,e)=>{const n=E(t);return h(()=>C(n,e(n))),n},Q=(t,e)=>{const n=E(t);if(!!n)return A(n,()=>({style:e(n)})),n},Y=(t,e,n)=>{const s=E(t);return h(()=>{if(s===null)return;const r=e(s),c=I(r).childNodes,o=new Map,i=(u,f=!0)=>{const l=w(u);l!=null&&o.set(l,{element:u,isNew:f})};if(s.children.length===0){const u=Array.from(c);s.append(...u),u.forEach(f=>i(f)),typeof n=="function"&&h(()=>{n(s,o)});return}const a=M(Array.from(s.childNodes),Array.from(c),(u,f)=>w(u)!=null&&w(f)!=null?w(u)===w(f):u===f);let y=a.find(u=>u.type==="="),d=0;a.forEach(u=>{if(u.type==="+"){const f=m(a,l=>l.type==="-"&&w(l.value)===w(u.value),d);if(f&&(u.value=f.value,f.skip=!0),!y){s.append(u.value),i(u.value),d+=1;return}y.value.before(u.value),i(u.value)}else if(u.type==="-"){if(u.skip){d+=1;return}s.removeChild(u.value);const f=m(a,l=>l.type==="+"&&w(l.value)===w(u.value),d);f&&(f.value=u.value)}else y=m(a,f=>f.type==="=",d),i(u.value,!1);d+=1}),typeof n=="function"&&h(()=>{n(s,o)})}),s};exports.batch=P;exports.bindChildrens=Y;exports.bindClass=B;exports.bindClasses=D;exports.bindDom=A;exports.bindInnerHTML=F;exports.bindInputValue=G;exports.bindStyle=Q;exports.bindTextContent=W;exports.createComputed=_;exports.createCssVariable=N;exports.createEffect=h;exports.createRef=J;exports.createStored=H;exports.createVariable=k;exports.untrack=U;
